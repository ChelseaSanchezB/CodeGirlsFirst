CREATE DATABASE SALES;

USE SALES;

CREATE TABLE STORE (
	I_ID VARCHAR(2),
    INAME CHAR(20),
    ITYPE CHAR(20),
    PRICE DECIMAL(3,2),
    SOLD INT,
PRIMARY KEY (I_ID)
);

CREATE TABLE SUPPLY (
	I_ID VARCHAR(2),
    QUANTITY INT,
    PRICE DECIMAL(3,2),
PRIMARY KEY (PRICE),
FOREIGN KEY (I_ID) REFERENCES STORE (I_ID)
);

CREATE TABLE COMPETITOR_1 (
    I_ID VARCHAR(2),
    PRICE DECIMAL(3,2),
    SOLD INT,
FOREIGN KEY (I_ID) REFERENCES STORE (I_ID)
);

CREATE TABLE COMPETITOR_2 (
    I_ID VARCHAR(2),
    PRICE DECIMAL(3,2),
    SOLD INT
);

CREATE TABLE COMPETITOR_3 (
    I_ID VARCHAR(2),
    PRICE DECIMAL(3,2),
    SOLD INT,
FOREIGN KEY (I_ID) REFERENCES STORE (I_ID)
);

CREATE TABLE COMPETITOR_4 (
    I_ID VARCHAR(2),
    PRICE DECIMAL(3,2),
    SOLD INT,
FOREIGN KEY (I_ID) REFERENCES STORE (I_ID)
);

ALTER TABLE STORE
DROP COLUMN ITYPE;

ALTER TABLE STORE
MODIFY COLUMN PRICE FLOAT;
ALTER TABLE SUPPLY
MODIFY COLUMN PRICE FLOAT;
ALTER TABLE COMPETITOR_1
MODIFY COLUMN PRICE FLOAT;
ALTER TABLE COMPETITOR_2
MODIFY COLUMN PRICE FLOAT;
ALTER TABLE COMPETITOR_3
MODIFY COLUMN PRICE FLOAT;
ALTER TABLE COMPETITOR_4
MODIFY COLUMN PRICE FLOAT;

INSERT INTO STORE
(I_ID, INAME, PRICE, SOLD)
VALUES
('I1', 'Ball', 5.00, 15),
('I2', 'Barbie', 12.49, 17),
('I3', 'Play-Doh', 9.99, 32),
('I4', 'Monopoly', 15.99, 10),
('I5', 'Teddy Bear', 12.00, 9),
('I6', 'Nerf gun', 20.00, 29),
('I7', 'Lego', 24.99, 50),
('I8', 'Hot Wheels', 2.00, 45),
('I9', 'UNO', 6.00, 35);

INSERT INTO SUPPLY
(I_ID, QUANTITY, PRICE)
VALUES
('I1', 50, 5.00),
('I2', 70, 12.49),
('I3', 60, 9.99),
('I4', 50, 15.99),
('I5', 95, 12),
('I6', 80, 20),
('I7', 70, 24.99),
('I8', 60, 2.00),
('I9', 71, 5.50);

INSERT INTO COMPETITOR_1
(I_ID, PRICE, SOLD)
VALUES
('I2', 10.00, 9),
('I5', 7.00, 25);

INSERT INTO COMPETITOR_2
(I_ID, PRICE, SOLD)
VALUES
('I2', 14.99, 30),
('I3', 12.50, 29),
('I4', 20.00, 42),
('I6', 24.99, 38),
('I7', 19.99, 54),
('I8', 1.50, 32);

INSERT INTO COMPETITOR_3
(I_ID, PRICE, SOLD)
VALUES
('I1', 8.99, 49),
('I3', 7.00, 15);

INSERT INTO COMPETITOR_4
(I_ID, PRICE, SOLD)
VALUES
('I7', 50.00, 250);

SHOW TABLES FROM SALES;

 -- How much did the store make in profit in the past month?
CREATE VIEW STORE_PROFIT
AS
SELECT PRICE, SOLD
FROM STORE;

SELECT PRICE, SOLD, PRICE*SOLD AS PROFIT
FROM STORE_PROFIT;


